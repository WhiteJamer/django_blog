{% extends 'base.html' %}
{% block content %}

{% load static %}

{% block js %}
{{ block.super }}
<script src="{% static '/js/el-pagination.js' %}"></script>
<script>
        $.endlessPaginate({
            paginateOnScroll: true,
            paginateOnScrollMargin: 20
        });


</script>
{% endblock %}

<div class="row justify-content-center">
  <div class="col-md-10">
    <h1>All comments <span class="badge badge-secondary mb-2" id="comments-count">{{comments.count}}</span></h1>
    {% if comments.count > 0 %}
    <div id="comment-list">

    </div>
    {% else %}
    <div class="text-muted">Nothing here</div>
    {% endif %}

    <div id='ajax-modal' class="modal fade bd-example-modal-lg" tabindex="-1" role="dialog"
         aria-labelledby="myLargeModalLabel" aria-hidden="true">
      <!--Ajax renderer data here-->
    </div>
  </div>
</div>

<script src="{% static '/js/ajax-ud.js' %}"></script>
<script>
  $(document).ready(function(){
    ajaxDelete(
    listName='#comment-list',
    objects='comments',
    btnClass='.comment-delete-btn',
    modalID='#ajax-modal',
    objClass='.card',
    csrfToken='input[name=csrfmiddlewaretoken]'
    );

    ajaxUpdate(
    listName='#comment-list',
    objects='comments',
    btnClass='.comment-update-btn',
    modalID='#ajax-modal',
    objClass='.card',
    csrfToken='input[name=csrfmiddlewaretoken]'
    );
  });

</script>

{% endblock %}